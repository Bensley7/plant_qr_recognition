<style>
  body {
    font-family: sans-serif;
    padding: 30px;
    line-height: 1.6;
  }

  img {
    margin: 10px 0;
    max-width: 400px;
  }

  h2 {
    margin-bottom: 20px;
  }

  .section-title {
    margin-top: 40px;
    margin-bottom: 15px;
    color: #2ecc71; /* üíö Vert clair */
    font-weight: bold;
    font-size: 1.3em;
    text-decoration: underline;
  }

  .field {
    margin-bottom: 10px;
  }

  .field strong {
    display: inline-block;
    width: 240px;
    color: #444;
    font-weight: normal; /* ‚úÖ pas en gras */
  }

  ul {
    margin-top: 5px;
    margin-left: 20px;
  }

  figure {
    margin: 0 0 20px 0;
  }

  figcaption {
    font-size: 0.85em;
    color: #666;
    margin-top: 5px;
  }
</style>


<!-- HTML Template adapted to number of images -->
{% if plant %}
  <h2>{{ plant["Nom scientifique"] }} ({{ plant["Nom fran√ßais"] }})</h2>

  <!-- Image count logic -->
  {% set nb_images = plant.image | length %}

  <!-- üìÖ Bloc 1 : Code + noms + classification + image 1 -->
  <div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap;">
    <div style="flex: 2; min-width: 400px;">
      {% for key in ["Code", "Nom arabe", "Noms vernaculaires", "Origine g√©ographique"] %}
        {% if plant[key] is not none and plant[key]|string != 'nan' %}
        <div class="field"><strong>{{ key }} :</strong> {{ plant[key] }}</div>
        {% endif %}
      {% endfor %}

      <div class="section-title">üî¨ Classification</div>
      {% for key in ["Division", "Classe", "Ordre", "Famille", "Genre", "Type de plante"] %}
        {% if plant[key] is not none and plant[key]|string != 'nan' %}
        <div class="field"><strong>{{ key }} :</strong> {{ plant[key] }}</div>
        {% endif %}
      {% endfor %}
    </div>

    <div style="flex: 1.2; min-width: 280px;">
      {% if nb_images >= 1 %}
      <img src="{{ url_for('static', filename=plant.image[0]) }}" alt="Image 1" style="width: 100%; border-radius: 6px;">
      <div style="font-size: 0.85em; color: #666;">Photo prise √† l'ENS de F√®s.</div>
      {% endif %}
    </div>
  </div>

  {% if nb_images >= 2 %}
  <!-- üñºÔ∏è Bloc 2 : image 2 / ph√©nologie + botanique -->
  <div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap; margin-top: 30px;">
    <div style="flex: 1.2; min-width: 280px;">
      <img src="{{ url_for('static', filename=plant.image[1]) }}" alt="Image 2" style="width: 100%; border-radius: 6px;">
      <div style="font-size: 0.85em; color: #666;">Photo prise √† l'ENS de F√®s.</div>
    </div>
    <div style="flex: 2; min-width: 400px;">
      <div class="section-title">üå¶Ô∏è Informations ph√©nologiques</div>
      {% for key in ["Mois de d√©bourrement", "P√©riode de croissance v√©g√©tative", "P√©riode de floraison", "P√©riode de fructification", "P√©riode de maturit√© des fruits", "P√©riode de chute des feuilles"] %}
        {% if plant[key] is not none and plant[key]|string != 'nan' %}
        <div class="field"><strong>{{ key }} :</strong> {{ plant[key] }}</div>
        {% endif %}
      {% endfor %}

      {% if nb_images == 2 %}
      <div class="section-title">üî¨ Description botanique</div>
      {% for key in ["Type de feuillage", "Hauteur moyenne ou maximale", "Type de feuilles", "Forme des feuilles", "Bord des feuilles", "Disposition des feuilles", "Couleur des fleurs", "Structure florale", "Type de fruit", "Type de racine"] %}
        {% if plant[key] is not none and plant[key]|string != 'nan' %}
        <div class="field"><strong>{{ key }} :</strong> {{ plant[key] }}</div>
        {% endif %}
      {% endfor %}
      {% endif %}
    </div>
  </div>
  {% endif %}

  {% if nb_images == 3 %}
  <!-- üî¨ Description botanique / image 3 -->
  <div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap; margin-top: 30px;">
    <div style="flex: 2; min-width: 400px;">
      <div class="section-title">üî¨ Description botanique</div>
      {% for key in ["Type de feuillage", "Hauteur moyenne ou maximale", "Type de feuilles", "Forme des feuilles", "Bord des feuilles", "Disposition des feuilles", "Couleur des fleurs", "Structure florale", "Type de fruit", "Type de racine"] %}
        {% if plant[key] is not none and plant[key]|string != 'nan' %}
        <div class="field"><strong>{{ key }} :</strong> {{ plant[key] }}</div>
        {% endif %}
      {% endfor %}
    </div>
    <div style="flex: 1.2; min-width: 280px;">
      <img src="{{ url_for('static', filename=plant.image[2]) }}" alt="Image 3" style="width: 100%; border-radius: 6px;">
      <div style="font-size: 0.85em; color: #666;">Photo prise √† l'ENS de F√®s.</div>
    </div>
  </div>
  {% endif %}

  <!-- üåø Int√©r√™ts / Carte de r√©partition -->
  <div style="display: flex; gap: 30px; align-items: flex-start; flex-wrap: wrap; margin-top: 30px;">
    <div style="flex: 2; min-width: 400px;">
      {% if plant["int√©r√™ts"] %}
      <div class="section-title">üåø Int√©r√™ts</div>
      <ul>
        {% for item in plant["int√©r√™ts"] %}
        <li>{{ item }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
    <div style="flex: 1.2; min-width: 280px;">
      {% if plant.map %}
      <div class="section-title">üó∫Ô∏è Carte de r√©partition</div>
      <img src="{{ url_for('static', filename=plant.map) }}" alt="Carte de r√©partition" style="width: 100%; border-radius: 6px;">
      {% if plant["Url carte de r√©partition"] %}
      <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
        Source : <a href="{{ plant['Url carte de r√©partition'] }}" target="_blank">{{ plant['Url carte de r√©partition'] }}</a>
      </div>
      {% endif %}
      {% endif %}
    </div>
  </div>
{% else %}
  <p>Esp√®ce non trouv√©e : {{ code }}</p>
{% endif %}